import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as o,a as s,b as t,w as n,d as i,e as a,r,o as p}from"./app-D3ONNahh.js";const h={},d=s("p",null,[s("strong",null,[i("æˆ‘æ˜¯ javapubï¼Œä¸€å "),s("code",null,"Markdown"),i(" ç¨‹åºå‘˜ä»ğŸ‘¨â€ğŸ’»ï¼Œå…«è‚¡æ–‡ç§å­é€‰æ‰‹ã€‚")])],-1),k=a(`<div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> acquire_lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">redis_conn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">lock_key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">lock_value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">lock_timeout</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> redis_conn.</span><span style="--shiki-light:#24292E;--shiki-dark:#61AFEF;">setnx</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(lock_key, lock_value):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        redis_conn.</span><span style="--shiki-light:#24292E;--shiki-dark:#61AFEF;">expire</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(lock_key, lock_timeout)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> release_lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">redis_conn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">lock_key</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#24292E;--shiki-dark:#D19A66;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">lock_value</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> redis_conn.</span><span style="--shiki-light:#24292E;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(lock_key) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> lock_value:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        redis_conn.</span><span style="--shiki-light:#24292E;--shiki-dark:#61AFEF;">delete</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(lock_key)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> False</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),c=s("code",null,"acquire_lock",-1),u=s("code",null,"setnx",-1),g=s("code",null,"release_lock",-1),y=a('<figure><img src="https://ghproxy.com/https://raw.githubusercontent.com/Rodert/javapub_oss/main/other/31.jpg?raw=true" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æœ€è¿‘æˆ‘åœ¨æ›´æ–°ã€Šé¢è¯•1v1ã€‹ç³»åˆ—æ–‡ç« ï¼Œä¸»è¦ä»¥åœºæ™¯åŒ–çš„æ–¹å¼ï¼Œè®²è§£æˆ‘ä»¬åœ¨é¢è¯•ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè‡´åŠ›äºè®©æ¯ä¸€ä½å·¥ç¨‹å¸ˆæ‹¿åˆ°è‡ªå·±å¿ƒä»ªçš„offerï¼Œæ„Ÿå…´è¶£å¯ä»¥å…³æ³¨<strong>å…¬ä¼—å·JavaPub</strong>è¿½æ›´ï¼</p><figure><img src="https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/2024%2F06%2F06%2F20240606-225632.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ğŸç›®å½•åˆé›†ï¼š</p><p>Giteeï¼š<code>https://gitee.com/rodert/JavaPub</code></p><p>GitHubï¼š<code>https://github.com/Rodert/JavaPub</code></p><p><a href="http://javapub.net.cn" target="_blank" rel="noopener noreferrer">http://javapub.net.cn</a></p>',7);function m(_,f){const e=r("font");return p(),o("div",null,[d,s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š å—¨ï¼Œå€™é€‰äººï¼å¬è¯´ä½ å¯¹Redisåˆ†å¸ƒå¼é”å¾ˆæ„Ÿå…´è¶£ï¼Œæ˜¯å—ï¼Ÿ")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" æ˜¯çš„ï¼Œé¢è¯•å®˜ï¼æˆ‘å¯¹åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼å¾ˆæ„Ÿå…´è¶£ï¼Œå°¤å…¶æ˜¯Redisä½œä¸ºåˆ†å¸ƒå¼é”çš„é€‰æ‹©ã€‚")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š å¾ˆå¥½ï¼é‚£æˆ‘ä»¬å°±æ¥èŠèŠRedisåˆ†å¸ƒå¼é”çš„åŸç†å§ã€‚ä½ çŸ¥é“Redisæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é”çš„å—ï¼Ÿ")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" å½“ç„¶ï¼Redisä½¿ç”¨çš„æ˜¯åŸºäºSETNXå‘½ä»¤çš„æ–¹å¼æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚æˆ‘å¯ä»¥ç»™ä½ æ¼”ç¤ºä¸€ä¸‹æºç å®ç°å—ï¼Ÿ")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š å½“ç„¶å¯ä»¥ï¼è¯·å¼€å§‹ä½ çš„è¡¨æ¼”ã€‚")])]),k,s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" è¿™æ˜¯ä¸€ä¸ªç®€å•çš„Pythonä»£ç ç¤ºä¾‹ã€‚åœ¨"),c,i("å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨"),u,i("å‘½ä»¤æ¥å°è¯•è·å–é”ã€‚å¦‚æœæˆåŠŸè·å–åˆ°é”ï¼Œæˆ‘ä»¬è®¾ç½®é”çš„è¿‡æœŸæ—¶é—´ï¼Œå¹¶è¿”å›Trueã€‚å¦‚æœè·å–é”å¤±è´¥ï¼Œæˆ‘ä»¬è¿”å›Falseã€‚åœ¨"),g,i("å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥é”çš„å€¼æ˜¯å¦ä¸ä¼ å…¥çš„å€¼ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œæˆ‘ä»¬åˆ é™¤é”å¹¶è¿”å›Trueï¼Œå¦åˆ™è¿”å›Falseã€‚")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š çœ‹èµ·æ¥å¾ˆç®€å•æ˜äº†ï¼ä½†æ˜¯ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„åœ°æ–¹å‘¢ï¼Ÿ")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" å½“ç„¶æœ‰ï¼åœ¨ä½¿ç”¨Redisåˆ†å¸ƒå¼é”æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸¤ä¸ªä¸»è¦é—®é¢˜ã€‚é¦–å…ˆæ˜¯é”çš„è¶…æ—¶æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨ä¸šåŠ¡é€»è¾‘æ‰§è¡ŒæœŸé—´é”ä¸ä¼šè¿‡æœŸã€‚å…¶æ¬¡æ˜¯é”çš„é‡Šæ”¾ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åªæœ‰æŒæœ‰é”çš„å®¢æˆ·ç«¯æ‰èƒ½é‡Šæ”¾é”ï¼Œé¿å…è¯¯é‡Šæ”¾ã€‚")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š éå¸¸é‡è¦çš„æé†’ï¼é‚£ä¹ˆï¼Œä½ æœ‰ä»€ä¹ˆå»ºè®®æ¥ä¼˜åŒ–Redisåˆ†å¸ƒå¼é”çš„æ€§èƒ½å—ï¼Ÿ")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" å½“ç„¶ï¼ä¸€ä¸ªå¸¸è§çš„ä¼˜åŒ–æ–¹å¼æ˜¯ä½¿ç”¨Luaè„šæœ¬æ¥å‡å°‘ç½‘ç»œå¼€é”€ã€‚é€šè¿‡å°†è·å–é”å’Œè®¾ç½®è¿‡æœŸæ—¶é—´çš„æ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œå¯ä»¥å‡å°‘ç½‘ç»œå¾€è¿”æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š å¾ˆæ£’çš„å»ºè®®ï¼è¿˜æœ‰å…¶ä»–çš„ä¼˜åŒ–ç­–ç•¥å—ï¼Ÿ")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" å¦ä¸€ä¸ªä¼˜åŒ–ç­–ç•¥æ˜¯ä½¿ç”¨Redlockç®—æ³•æ¥å¢åŠ é”çš„å¯é æ€§ã€‚Redlockç®—æ³•é€šè¿‡åœ¨å¤šä¸ªRediså®ä¾‹ä¸Šè·å–é”ï¼Œä»¥æé«˜åˆ†å¸ƒå¼é”çš„å¯ç”¨æ€§å’Œå®¹é”™æ€§ã€‚")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š éå¸¸æœ‰è§åœ°ï¼ä½ å¯¹Redisåˆ†å¸ƒå¼é”çš„äº†è§£ä»¤äººå°è±¡æ·±åˆ»ã€‚æœ‰æ²¡æœ‰ä»€ä¹ˆå…¶ä»–é—®é¢˜æˆ–è€…æƒ³æ³•ï¼Ÿ")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" æˆ‘è®¤ä¸ºåœ¨ä½¿ç”¨Redisåˆ†å¸ƒå¼é”æ—¶ï¼Œæˆ‘ä»¬è¿˜åº”è¯¥è€ƒè™‘åˆ°ç½‘ç»œå»¶è¿Ÿå’Œæ•…éšœçš„æƒ…å†µï¼Œä»¥åŠå¦‚ä½•å¤„ç†æ­»é”å’Œé”ç«äº‰çš„æƒ…å†µã€‚")]),s("p",null,[s("strong",null,[t(e,{color:"blue"},{default:n(()=>[i("é¢è¯•å®˜")]),_:1}),i("ï¼š éå¸¸å¥½çš„è§‚ç‚¹ï¼ä½ å¯¹åˆ†å¸ƒå¼é”çš„ç†è§£éå¸¸å…¨é¢ã€‚æˆ‘å¯¹ä½ çš„å›ç­”å°è±¡æ·±åˆ»ï¼è°¢è°¢ä½ çš„æ—¶é—´ã€‚")])]),s("p",null,[s("strong",null,[t(e,{color:"red"},{default:n(()=>[i("å€™é€‰äººï¼š")]),_:1})]),i(" éå¸¸æ„Ÿè°¢æ‚¨çš„èµèµï¼Œé¢è¯•å®˜ï¼æˆ‘å¾ˆé«˜å…´èƒ½ä¸æ‚¨åˆ†äº«æˆ‘çš„è§è§£ã€‚")]),y])}const B=l(h,[["render",m],["__file","31.Redis_fenbushisuo.html.vue"]]),A=JSON.parse('{"path":"/posts/special/1v1/31.Redis_fenbushisuo.html","title":"Redisåˆ†å¸ƒå¼é”","lang":"zh-CN","frontmatter":{"title":"Redisåˆ†å¸ƒå¼é”","icon":"laptop-code","category":["ã€Šé¢è¯•1v1ã€‹"],"description":"æˆ‘æ˜¯ javapubï¼Œä¸€å Markdown ç¨‹åºå‘˜ä»ğŸ‘¨â€ğŸ’»ï¼Œå…«è‚¡æ–‡ç§å­é€‰æ‰‹ã€‚ ï¼š å—¨ï¼Œå€™é€‰äººï¼å¬è¯´ä½ å¯¹Redisåˆ†å¸ƒå¼é”å¾ˆæ„Ÿå…´è¶£ï¼Œæ˜¯å—ï¼Ÿ æ˜¯çš„ï¼Œé¢è¯•å®˜ï¼æˆ‘å¯¹åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼å¾ˆæ„Ÿå…´è¶£ï¼Œå°¤å…¶æ˜¯Redisä½œä¸ºåˆ†å¸ƒå¼é”çš„é€‰æ‹©ã€‚ ï¼š å¾ˆå¥½ï¼é‚£æˆ‘ä»¬å°±æ¥èŠèŠRedisåˆ†å¸ƒå¼é”çš„åŸç†å§ã€‚ä½ çŸ¥é“Redisæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é”çš„å—ï¼Ÿ å½“ç„¶ï¼Redisä½¿ç”¨çš„æ˜¯åŸºäºSE...","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/posts/special/1v1/31.Redis_fenbushisuo.html"}],["meta",{"property":"og:site_name","content":"JavaPub"}],["meta",{"property":"og:title","content":"Redisåˆ†å¸ƒå¼é”"}],["meta",{"property":"og:description","content":"æˆ‘æ˜¯ javapubï¼Œä¸€å Markdown ç¨‹åºå‘˜ä»ğŸ‘¨â€ğŸ’»ï¼Œå…«è‚¡æ–‡ç§å­é€‰æ‰‹ã€‚ ï¼š å—¨ï¼Œå€™é€‰äººï¼å¬è¯´ä½ å¯¹Redisåˆ†å¸ƒå¼é”å¾ˆæ„Ÿå…´è¶£ï¼Œæ˜¯å—ï¼Ÿ æ˜¯çš„ï¼Œé¢è¯•å®˜ï¼æˆ‘å¯¹åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼å¾ˆæ„Ÿå…´è¶£ï¼Œå°¤å…¶æ˜¯Redisä½œä¸ºåˆ†å¸ƒå¼é”çš„é€‰æ‹©ã€‚ ï¼š å¾ˆå¥½ï¼é‚£æˆ‘ä»¬å°±æ¥èŠèŠRedisåˆ†å¸ƒå¼é”çš„åŸç†å§ã€‚ä½ çŸ¥é“Redisæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é”çš„å—ï¼Ÿ å½“ç„¶ï¼Redisä½¿ç”¨çš„æ˜¯åŸºäºSE..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://ghproxy.com/https://raw.githubusercontent.com/Rodert/javapub_oss/main/other/31.jpg?raw=true"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-03T14:35:52.000Z"}],["meta",{"property":"article:author","content":"Mr.Wang"}],["meta",{"property":"article:modified_time","content":"2024-07-03T14:35:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redisåˆ†å¸ƒå¼é”\\",\\"image\\":[\\"https://ghproxy.com/https://raw.githubusercontent.com/Rodert/javapub_oss/main/other/31.jpg?raw=true\\",\\"https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/2024%2F06%2F06%2F20240606-225632.png\\"],\\"dateModified\\":\\"2024-07-03T14:35:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Wang\\",\\"url\\":\\"https://javapub.net.cn\\"}]}"]]},"headers":[],"git":{"createdTime":1717568495000,"updatedTime":1720017352000,"contributors":[{"name":"wangshiyu","email":"iswangshiyu@foxmail.com","commits":1}]},"readingTime":{"minutes":3.02,"words":907},"filePathRelative":"posts/special/1v1/31.Redis_fenbushisuo.md","localizedDate":"2024å¹´6æœˆ5æ—¥","excerpt":"<p><strong>æˆ‘æ˜¯ javapubï¼Œä¸€å <code>Markdown</code> ç¨‹åºå‘˜ä»ğŸ‘¨â€ğŸ’»ï¼Œå…«è‚¡æ–‡ç§å­é€‰æ‰‹ã€‚</strong></p>\\n<p><strong>ï¼š å—¨ï¼Œå€™é€‰äººï¼å¬è¯´ä½ å¯¹Redisåˆ†å¸ƒå¼é”å¾ˆæ„Ÿå…´è¶£ï¼Œæ˜¯å—ï¼Ÿ</strong></p>\\n<p><strong></strong> æ˜¯çš„ï¼Œé¢è¯•å®˜ï¼æˆ‘å¯¹åˆ†å¸ƒå¼é”çš„å®ç°æ–¹å¼å¾ˆæ„Ÿå…´è¶£ï¼Œå°¤å…¶æ˜¯Redisä½œä¸ºåˆ†å¸ƒå¼é”çš„é€‰æ‹©ã€‚</p>\\n<p><strong>ï¼š å¾ˆå¥½ï¼é‚£æˆ‘ä»¬å°±æ¥èŠèŠRedisåˆ†å¸ƒå¼é”çš„åŸç†å§ã€‚ä½ çŸ¥é“Redisæ˜¯å¦‚ä½•å®ç°åˆ†å¸ƒå¼é”çš„å—ï¼Ÿ</strong></p>\\n<p><strong></strong> å½“ç„¶ï¼Redisä½¿ç”¨çš„æ˜¯åŸºäºSETNXå‘½ä»¤çš„æ–¹å¼æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚æˆ‘å¯ä»¥ç»™ä½ æ¼”ç¤ºä¸€ä¸‹æºç å®ç°å—ï¼Ÿ</p>","autoDesc":true}');export{B as comp,A as data};
