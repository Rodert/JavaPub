---
title: å·¥ä½œæ€»ç»“ï¼æ—¥å¿—æ‰“å°çš„11æ¡å»ºè®®
icon: lightbulb
author: Wang Shiyu
date: 2022-07-04
category:
  - ç¼–ç¨‹è§„èŒƒ
  - æ—¥å¿—
tag:
  - ç¼–ç¨‹è§„èŒƒ
  - æ—¥å¿—
---

> å·¥ä½œæ€»ç»“ï¼æ—¥å¿—æ‰“å°çš„11æ¡å»ºè®®


## å‰è¨€

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ JavaPubã€‚æ—¥å¿—æ˜¯æˆ‘ä»¬å®šä½é—®é¢˜çš„å¾—åŠ›åŠ©æ‰‹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å›¢é˜Ÿé—´åä½œæ²Ÿé€šï¼ˆç”©é”…ï¼‰ã€æ˜ç¡®è´£ä»»å½’å±ï¼ˆæ’•Bï¼‰çš„åˆ©å™¨ã€‚æ²¡æœ‰æ—¥å¿—çš„ç¨‹åºè¿è¡Œèµ·æ¥å°±å¦‚åŒè„±ç¼°çš„é‡ğŸã€‚æ‰“å°æ—¥å¿—éå¸¸é‡è¦ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠæ—¥å¿—æ‰“å°çš„ N ä¸ªå¥½å»ºè®®ï½

![image-20240314165434764](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403141654414.png)

### é€‰æ‹©åˆé€‚çš„æ—¥å¿—ç­‰çº§

åœ¨å¼€å‘ä¸­æˆ‘ä»¬æœ‰å¸¸è§çš„å››ç§æ—¥å¿—æ‰“å°ç­‰çº§ï¼Œdebugã€infoã€warnã€errorï¼Œè¦é€‰æ‹©åˆé€‚çš„ç­‰çº§æ‰“å°ï¼Œä¸è¦ä¸Šæ¥ç›´æ¥ infoã€‚

![image-20240314214602647](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142146940.png)

- error: é”™è¯¯æ—¥å¿—ï¼ŒæŒ‡æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œä¼šå¯¹ç³»ç»Ÿå’Œæœ‰ä¸šåŠ¡é€ æˆä¼¤å®³ã€‚**è¿ç»´ç›‘æ§é‡ç‚¹å…³æ³¨**ã€‚

- warn: è­¦å‘Šæ—¥å¿—ï¼Œä¸ä¼šå¯¹ç³»ç»Ÿè¿è¡Œé€ æˆå¤§çš„å½±å“ï¼Œä¸€èˆ¬ç”±**å¼€å‘äººå‘˜å…³æ³¨**ã€‚

- info: å…³é”®æ—¥å¿—ï¼Œä¸ºäº†ä¿ç•™ç³»ç»Ÿè¿è¡Œå…³é”®æŒ‡æ ‡ï¼Œæ¯”å¦‚å‡½æ•°çš„å…¥å‚ã€å‡ºå‚ï¼Œæ—¶é—´ç­‰ä¿¡æ¯ã€‚

- debug: å¼€å‘æ—¥å¿—ï¼Œåœ¨å¼€å‘è°ƒè¯•é˜¶æ®µï¼Œè®°å½•å¯¹è±¡æ•°æ®åœ¨å…³é”®å¤„ç†æ­¥éª¤ä¸­çš„å˜åŒ–æƒ…å†µã€å¿«é€Ÿå®šä½ã€‚


### è¦æ‰“å°å‡½æ•°çš„å…¥å‚ã€å‡ºå‚

è®°å½•æ—¥å¿—å¹¶ä¸æ˜¯è¦æŠŠæ‰€æœ‰ä¿¡æ¯éƒ½è®°å½•ä¸‹æ¥ï¼Œé‚£æ—¥å¿—å­˜å‚¨å°±è¦å¤§åˆ°ä¸Šå¤©ã€‚æˆ‘ä»¬åª**è®°å½•å…³é”®æœ‰æ•ˆçš„æ—¥å¿—**ï¼Œæœ‰æ•ˆæ—¥å¿—æ‰æ˜¯ battle ğŸ†š æ—¶æ€æ‰‹é”ã€‚

![image-20240314214637143](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142146612.png)

å“ªäº›ç®—æ˜¯æœ‰æ•ˆæ—¥å¿—ï¼Ÿæ¯”å¦‚å‡½æ•°çš„å…¥å£å¤„ï¼Œæ‰“å°å…¥å‚ï¼Œè¿˜åŒ…æ‹¬**ç”¨æˆ·å”¯ä¸€æ ‡è¯† ï¼ˆuidï¼‰ã€é“¾è·¯æ ‡è¯† ï¼ˆtraceIdï¼‰** ç­‰ã€‚å‡½æ•°å‡ºå£æ‰“å°è¿”å›å€¼åŠ**æ—¶é—´**ç­‰ã€‚

```java
    public String GetName(Request req, Integer id){
        log.debug("method start param: {}", req.UserID);
        
        String name = "JavaPub";
        log.debug("method end result: {}", name);
        return name;
    }
```



### æ‰“å°æ—¥å¿—å¯¹è±¡è¦åšåˆ¤ç©ºå¤„ç†ï¼Œé¿å…é˜»æ–­æµç¨‹

![image-20240314214712731](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142147088.png)

**ä¸ºäº†æ‰“å°ä¸€è¡Œæ—¥å¿—ï¼Œç¨‹åºå†™æŒ‚äº†**ã€‚ç©ºæŒ‡é’ˆå¼‚å¸¸åœ¨ä»»ä½•ä»£ç ä¸­éƒ½æ˜¯æœ€å¸¸è§çš„å¼‚å¸¸ä¹‹ä¸€ã€‚

åä¾‹ï¼šå½“ book å¯¹è±¡æ˜¯ NULL çš„è¯ï¼Œè¿™è¡Œæ—¥å¿—å°±ä¼šæŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚

```java
public void doSome(Book book){
    log.info("do do and print log: {}". book.getName());
    // do something...
    ...
}
```

### ä¸è¦ä½¿ç”¨æ—¥å¿—ç³»ç»Ÿçš„ï¼ˆLog4jã€Logbackï¼‰ï¼Œè¦ä½¿ç”¨ Slf4j

![image-20240314214745191](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142147288.png)

Slf4j æ˜¯ä½¿ç”¨é—¨é¢æ¨¡å¼çš„æ—¥å¿—æ¡†æ¶ï¼Œå¯ä»¥è§£è€¦å…·ä½“çš„æ—¥å¿—å®ç°ã€‚å¯ä»¥åœ¨**ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ›´æ¢åº•å±‚çš„æ—¥å¿—æ¡†æ¶**ã€‚

æ­£ä¾‹ï¼š

```java
import org.slf4j.Logger; 
import org.slf4j.LoggerFactory;

private static final Logger logger = LoggerFactory.getLogger(JavaPub.class);
```



### å¯¹ä½çº§åˆ«çš„æ—¥å¿—è¾“å‡ºï¼Œå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«å¼€å…³åˆ¤æ–­

![image-20240314214801114](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142148112.png)

å¯¹äº traceã€debugã€info è¿™äº›æ¯”è¾ƒä½çš„æ—¥å¿—çº§åˆ«ï¼Œå¿…é¡»è¿›è¡Œæ—¥å¿—çº§åˆ«å¼€å…³ã€‚

æ­£ä¾‹ï¼š

å¼€å…³åˆ¤æ–­é€»è¾‘é€šå¸¸æ”¾åœ¨æ—¥å¿—å·¥å…·ç±»ä¸­ã€‚

```java
public void doSomething(){
    User user = new User(1, "æŠ€æœ¯è‡ªåª’ä½“", "JavaPub");
    if (logger.isDebugEnabled()) {
        logger.debug("print debug log. 666 is {}", user.getName());
    }
}
```

åä¾‹ï¼š

```java
public void doSth(){
    String name = "JavaPub";
    logger.trace("print debug log" + name);
    logger.debug("print debug log" + name);
    logger.info("print info log" + name);
    // ä¸šåŠ¡é€»è¾‘
    ...
}
```

å½“æ—¥å¿—çº§åˆ«æ˜¯ warn æ—¶ï¼Œä»¥ä¸Šæ—¥å¿—ä¸ä¼šæ‰“å°ï¼Œä½†æ˜¯ä¼šæ‰§è¡Œ**å­—ç¬¦ä¸²æ‹¼æ¥**æ“ä½œï¼Œå¦‚æœæ‰“å°å€¼æ˜¯å¯¹è±¡çš„è¯ï¼Œè¿˜ä¼šæ‰§è¡Œ `toString()` æ–¹æ³•ï¼Œæµªè´¹äº†ç³»ç»Ÿèµ„æºï¼Œå› æ­¤å»ºè®®**åŠ ä¸Šæ—¥å¿—å¼€å…³åˆ¤æ–­**ã€‚




### ä¸è¦ç”¨e.printStackTrace()æ‰“å°æ—¥å¿—


åä¾‹ï¼š

```java
public void doSomething(){
    try{
        // ä¸šåŠ¡ä»£ç 
        ...
    } catch (Exception e){
        e.printStackTrace();
    }
}
```

- `e.printStackTrace()` æ‰“å°å‡ºçš„æ—¥å¿—åŒ…å«å †æ ˆä¿¡æ¯ï¼Œå¯¼è‡´æˆ‘ä»¬çš„æ—¥å¿—ä¿¡æ¯ä¸è§„æ•´ã€å¢åŠ å®šä½é—®é¢˜çš„éš¾åº¦ã€‚å¦‚æœä½¿ç”¨ ELK åˆ†ææ—¥å¿—ä¹Ÿä¼šéå¸¸å›°éš¾ã€‚


- `e.printStackTrace()` è¯­å¥äº§ç”Ÿçš„å­—ç¬¦ä¸²è®°å½•çš„æ˜¯å †æ ˆä¿¡æ¯ï¼Œå¦‚æœä¿¡æ¯å¤ªé•¿å¤ªå¤šï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± æ‰€åœ¨çš„å†…å­˜å—æ²¡æœ‰ç©ºé—´äº†ï¼Œå³å†…å­˜æ»¡äº†ï¼Œç³»ç»Ÿè¯·æ±‚ä¹Ÿå°†è¢«é˜»å¡ã€‚

æ­£ä¾‹ï¼š

```java
public void doSomething(){
    try{
        // ä¸šåŠ¡é€»è¾‘
        ...
    } catch (Exception e){
        log.error("ç¨‹åºå¼‚å¸¸ failed", e);
    }
}
```

### æ‰“å°å…¨éƒ¨çš„å¼‚å¸¸ä¿¡æ¯ï¼Œæ–¹ä¾¿å®šä½é—®é¢˜

![image-20240314214823572](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142148731.png)

åä¾‹ï¼š

æ²¡æœ‰æ‰“å°ç³»ç»Ÿå¼‚å¸¸ `e`ï¼Œæ— æ³•å®šä½å‡ºç°äº†ä»€ä¹ˆç±»å‹çš„å¼‚å¸¸ã€‚

```java
public void doSth(){
    try{
        // ä¸šåŠ¡é€»è¾‘
        ...
    } catch (Exception e){
        log.error("å‘ç”Ÿäº†ä¸€ä¸ªå¼‚å¸¸");
    }
}
```

### ä¸è¦æ‰“å°é‡å¤æ—¥å¿—

![image-20240314214836800](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142148798.png)

åœ¨åµŒå¥—é€»è¾‘ä»£ç ä¸­æ‰“å°é‡å¤æ—¥å¿—ï¼Œå¢åŠ ç³»ç»Ÿèµ„æºæ¶ˆè€—å ç”¨ã€‚

åä¾‹ï¼š

```java
public void doSomething(String s){
    log.info("do something and print log: {}", s);
    doSubSomething(s);
}
â€‹
private void doSubSomething(String s){
    log.info("do sub something and print log: {}", s);
    // å†™ç‚¹ä¸šåŠ¡é€»è¾‘
    ...
}
```

æ­£ä¾‹ï¼š

åº”è¯¥ç›´æ¥åˆ æ‰æˆ–è€…å°†ä¸º debug æ—¥å¿—çº§åˆ«ã€‚

### æ—¥å¿—å°½é‡ä½¿ç”¨è‹±æ–‡

åä¾‹ï¼š

![image-20240314155834611](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403141558342.png)

å»ºè®®ï¼šå°½é‡åœ¨æ‰“å°æ—¶æ—¥å¿—æ—¶è¾“å‡ºè‹±æ–‡ï¼Œé˜²æ­¢ä¸­æ–‡ç¼–ç ä¸ç»ˆç«¯ä¸ä¸€è‡´å¯¼è‡´æ‰“å°å‡ºç°ä¹±ç ï¼Œå¯¹æ’æŸ¥æ•…éšœé€ æˆæ„ŸæŸ“ã€‚


### æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œåœ¨æ¯ä¸ªåˆ†æ”¯é¦–è¡Œéƒ½æ‰“å°æ—¥å¿—

åœ¨ç¼–å†™æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»£ç æ—¶ï¼Œé‡åˆ° **if...else** æˆ–è€… **switch** è¿™æ ·çš„åˆ†æ”¯æ¡ä»¶ï¼Œåœ¨è¡Œé¦–æ‰“å°æ—¥å¿—ï¼Œé€šè¿‡æ—¥å¿—å¯ä»¥å¿«é€Ÿæ’æŸ¥å®šä½å¼‚å¸¸ã€‚

```java
public void doSomething(){
    if(user.isVip()){
        log.info("è¯¥ç”¨æˆ·æ˜¯ JavaPub ä¼šå‘˜,Id:{},å¼€å§‹å¤„ç†ä¼šå‘˜é€»è¾‘",user,getUserId());
        // dosomething ä¼šå‘˜é€»è¾‘
    }else{
        log.info("è¯¥ç”¨æˆ·æ˜¯éä¼šå‘˜,Id:{},å¼€å§‹å¤„ç†éä¼šå‘˜é€»è¾‘",user,getUserId())
        // dosomething éä¼šå‘˜é€»è¾‘
    }
}
```



### ä¸è¦æ‰“å°æ— æ„ä¹‰çš„æ—¥å¿—ï¼ˆä¸æºå¸¦ä¸Šä¸‹æ–‡ã€æ—¥å¿—é“¾è·¯ idï¼‰

![image-20240314214848607](https://javapub-common-oss.oss-cn-beijing.aliyuncs.com/javapub/202403142148753.png)

åä¾‹ï¼š

ä¸æºå¸¦ä»»ä½•ä¸šåŠ¡ä¿¡æ¯çš„æ—¥å¿—ï¼Œå¯¹æ•…éšœæ’æŸ¥æ„ä¹‰ä¸å¤§ã€‚

```java
public void doSomething(){
    log.info("do something and print log. i am NB");
    // dosomething ä¸šåŠ¡é€»è¾‘
    ...
}
```

æ­£ä¾‹ï¼š

- æ—¥å¿—ä¸€å®šè¦æºå¸¦ä¸šåŠ¡ä¿¡æ¯ç›¸å…³å†…å®¹ï¼Œæœ‰åˆ©äºå¿«é€Ÿå®šä½é—®é¢˜åŸå› 

```java
public void doSomething(Request req, User user){
    log.info("do something and print log, id={}, trace_id={}", user.GetId, req.GetTraceId);
    // dosomething ä¸šåŠ¡é€»è¾‘
    ...
}
```



å¦‚ä½•æ‰“å°æ—¥å¿—å‘¢ï¼Ÿæ€»çš„æ¥è¯´ä¸è¦è®©ä½ çš„ç¨‹åºåœ¨é»‘ç›’æ€»è¿è¡Œï¼Œæ‰“å°å…³é”®ä¿¡æ¯ã€ä¿è¯åœ¨å‡ºç°å¼‚å¸¸æ—¶é€šè¿‡æ—¥å¿—å¿«é€Ÿå®šä½åˆ°é‚£é‡Œå°±å¯ä»¥å•¦ã€‚



